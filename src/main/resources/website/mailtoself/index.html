<!DOCTYPE html>
<html>
<!--#include file="includes/header.html" -->


<script>
    function init() {
        Tabs.render('tabs', Accounts.getAccountIds(), Accounts.getAccountDescriptions());
        Sender.render('sender');
        goToSend();
    }


    function goToSettings() {
        Elem.hide('areaSend').show('areaSettings');
        if (Tabs.isNotEmpty()) {
            var account_id = Tabs.getIdOfActiveTab();
            var account_description = Accounts.getAccountDescription(account_id);
            var user_name = Accounts.getUserName(account_id);
            AccountSaver.render('accountSaver', goToSend, account_id, account_description, user_name);
        }
    }


    function createNewAccount() {
        var accountId = Accounts.getRandomAccountId();
        AccountSaver.render('accountSaver', goToSend, accountId, '', '');
    }


    function goToSend() {
        Tabs.render('tabs', Accounts.getAccountIds(), Accounts.getAccountDescriptions());
        Elem.show('areaSend').hide('areaSettings');
    }


    /**
     * Display the argument message to user
     * @param message Message to display
     */
    function notify(message) {
        //Get element to place notification in
        var notification = Elem.getById("notification");
        //If there was no notification element on page
        if (!notification) {
            //Create notifications div
            notification = document.createElement('div');
            notification.id = 'notification';
            notification.classList.add('notification');
            //Add notification element
            document.body.appendChild(notification);
        }
        //Set notification text
        notification.innerHTML = message;
        //Display the notification
        Elem.show('notification');
        //Make the notification invisible after little bit
        setTimeout(function () {
                Elem.hide('notification');
            },
            1000);
    }

</script>


<body>
<h1>Mail To Self</h1>

<div id="areaSend">
    <div id="tabs"></div>
    <div id="sender"></div>
    <a href="javascript:goToSettings();">Settings</a>
</div>

<div id="areaSettings">
    <h1>Settings</h1>
    <div id="accountSaver"></div>
    <button type="button" onClick="createNewAccount();">Add Account</button>
    <a href="javascript:goToSend();">Back</a>
</div>

<script>init();</script>
</body>
</html>